import"./Bzak7iHL.js";import{o as N,s as O}from"./Cnemhwww.js";import{p as w,f as y,a6 as z,b as m,c as A,d as p,r as u,x as _,a7 as T,a as H,s as P,a5 as Q,a9 as R,t as U}from"./CvxshvV9.js";import{r as D,i as V}from"./MKxKdFyJ.js";import{i as W,e as X,H as Y}from"./CaiN0HuH.js";import{a as E,c as Z,C as $}from"./DwcqTYZ3.js";import{p as C}from"./BAQtG-l3.js";import{r as ee}from"./CjgLWS-n.js";import{c as S}from"./DNQ9YxlG.js";import{d as L,a as te}from"./D3o8oyne.js";const j=S(),x=S(()=>0),b=S();var ae=y("<section><!></section>");function ve(l,e){w(e,!0);const h=D(e,["$$slots","$$events","$$legacy","children"]),t=L.get(),n=x.get()+1;x.set(n);const i=b.get_maybe(),f=t.generate_section_id();b.set(f);let r;j.set(s=>(r=s,i));var a=ae();E(a,()=>({...h}));var c=p(a);z(c,()=>e.children),u(a),Z(a,()=>W(()=>({intersecting:s})=>{r&&(s?t.fragments_onscreen.add(r):t.fragments_onscreen.delete(r))})),m(l,a),A()}var se=y('<div class="flex:1"><!></div> <!>',1),re=y("<header><!></header>");function ge(l,e){w(e,!0);const h=D(e,["$$slots","$$events","$$legacy","text","tag","children"]),t=T(()=>te(e.text)),v=j.get();if(!v)throw Error("TomeSectionHeader must be a child of TomeSection");const n=L.get(),i=x.get(),f=T(()=>e.tag??(i===1?"h2":i===2?"h3":"h4")),r=b.get(),a=v(_(t));let c;C.url.pathname!==ee(n.root_path)&&(c=n.add(_(t),e.text,C.url.pathname,_(f),i,a,r)),N(()=>{c&&n.remove(c)});var s=re(),q=p(s);X(q,()=>_(f),!1,(B,F)=>{E(B,()=>({...h,[$]:{tome_section_header:!0}}),void 0,void 0,void 0,"svelte-dz8ld7");var k=se(),g=H(k),G=p(g);{var I=o=>{var d=Q(),M=H(d);z(M,()=>e.children),m(o,d)},J=o=>{var d=R();U(()=>O(d,e.text)),m(o,d)};V(G,o=>{e.children?o(I):o(J,!1)})}u(g);var K=P(g,2);Y(K,{get fragment(){return _(t)}}),m(F,k)}),u(s),m(l,s),A()}export{ve as T,ge as a};
