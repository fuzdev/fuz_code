import"./Bzak7iHL.js";import{o as N,s as O}from"./DS1vOJwZ.js";import{p as A,f as y,d as p,z as C,r as u,b as m,c as w,M as _,ae as T,a as H,s as P,y as Q,A as R,t as U}from"./CSlhhggs.js";import{r as D,i as V}from"./DulVGVep.js";import{e as W}from"./CspViZ_3.js";import{a as E,c as X,C as Y}from"./DmiNqta-.js";import{p as z}from"./DKv3rs9M.js";import{r as Z}from"./B25sCIiF.js";import{i as $,H as ee}from"./SRw3YknD.js";import{c as S}from"./DIcdNuOq.js";import{d as L,b as te}from"./De0vE3KY.js";const M=S(),x=S(()=>0),b=S();var se=y("<section><!></section>");function ge(l,e){A(e,!0);const h=D(e,["$$slots","$$events","$$legacy","children"]),t=L.get(),n=x.get()+1;x.set(n);const i=b.get_maybe(),f=t.generate_section_id();b.set(f);let r;M.set(a=>(r=a,i));var s=se();E(s,()=>({...h}));var c=p(s);C(c,()=>e.children),u(s),X(s,()=>$(()=>({intersecting:a})=>{r&&(a?t.fragments_onscreen.add(r):t.fragments_onscreen.delete(r))})),m(l,s),w()}var ae=y('<div class="flex:1"><!></div> <!>',1),re=y("<header><!></header>");function pe(l,e){A(e,!0);const h=D(e,["$$slots","$$events","$$legacy","text","tag","children"]),t=T(()=>te(e.text)),v=M.get();if(!v)throw Error("TomeSectionHeader must be a child of TomeSection");const n=L.get(),i=x.get(),f=T(()=>e.tag??(i===1?"h2":i===2?"h3":"h4")),r=b.get(),s=v(_(t));let c;z.url.pathname!==Z(n.root_path)&&(c=n.add(_(t),e.text,z.url.pathname,_(f),i,s,r)),N(()=>{c&&n.remove(c)});var a=re(),j=p(a);W(j,()=>_(f),!1,(q,B)=>{E(q,()=>({...h,[Y]:{tome_section_header:!0}}),void 0,void 0,void 0,"svelte-dz8ld7");var k=ae(),g=H(k),F=p(g);{var G=o=>{var d=Q(),K=H(d);C(K,()=>e.children),m(o,d)},I=o=>{var d=R();U(()=>O(d,e.text)),m(o,d)};V(F,o=>{e.children?o(G):o(I,!1)})}u(g);var J=P(g,2);ee(J,{get fragment(){return _(t)}}),m(B,k)}),u(a),m(l,a),w()}export{ge as T,pe as a};
