import"./Bzak7iHL.js";import{o as N,s as O}from"./Bp9kQEQi.js";import{p as D,f as y,d as p,a9 as w,r as u,b as m,c as z,D as _,aa as T,a as H,s as P,a8 as Q,ac as R,t as U}from"./BoFqiF_g.js";import{r as A,i as V}from"./CmgneXan.js";import{e as W}from"./rEOT66xB.js";import{a as E,c as X,C as Y}from"./DX0fpRmg.js";import{p as C}from"./Cu3AwLyQ.js";import{r as Z}from"./TpsExpY5.js";import{i as $,H as ee}from"./DVB4RWhG.js";import{c as S}from"./CEM5mKR2.js";import{d as L,a as te}from"./BOboL7iL.js";const j=S(),x=S(()=>0),b=S();var ae=y("<section><!></section>");function ge(l,e){D(e,!0);const h=A(e,["$$slots","$$events","$$legacy","children"]),t=L.get(),n=x.get()+1;x.set(n);const i=b.get_maybe(),f=t.generate_section_id();b.set(f);let r;j.set(s=>(r=s,i));var a=ae();E(a,()=>({...h}));var c=p(a);w(c,()=>e.children),u(a),X(a,()=>$(()=>({intersecting:s})=>{r&&(s?t.fragments_onscreen.add(r):t.fragments_onscreen.delete(r))})),m(l,a),z()}var se=y('<div class="flex:1"><!></div> <!>',1),re=y("<header><!></header>");function pe(l,e){D(e,!0);const h=A(e,["$$slots","$$events","$$legacy","text","tag","children"]),t=T(()=>te(e.text)),v=j.get();if(!v)throw Error("TomeSectionHeader must be a child of TomeSection");const n=L.get(),i=x.get(),f=T(()=>e.tag??(i===1?"h2":i===2?"h3":"h4")),r=b.get(),a=v(_(t));let c;C.url.pathname!==Z(n.root_path)&&(c=n.add(_(t),e.text,C.url.pathname,_(f),i,a,r)),N(()=>{c&&n.remove(c)});var s=re(),q=p(s);W(q,()=>_(f),!1,(B,F)=>{E(B,()=>({...h,[Y]:{tome_section_header:!0}}),void 0,void 0,void 0,"svelte-dz8ld7");var k=se(),g=H(k),G=p(g);{var I=o=>{var d=Q(),M=H(d);w(M,()=>e.children),m(o,d)},J=o=>{var d=R();U(()=>O(d,e.text)),m(o,d)};V(G,o=>{e.children?o(I):o(J,!1)})}u(g);var K=P(g,2);ee(K,{get fragment(){return _(t)}}),m(F,k)}),u(s),m(l,s),z()}export{ge as T,pe as a};
